<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
	<modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>org.komodo</groupId>
    <artifactId>komodo-parent</artifactId>
	<version>0.0.4-SNAPSHOT</version>
    <relativePath>komodo-parent/pom.xml</relativePath>
  </parent>

	<artifactId>komodo</artifactId>

	<packaging>pom</packaging>
	<name>Komodo</name>
	<description>Builds the entire Komodo distribution.</description>

	<modules>
        <!-- Order is important -->

        <!-- First these -->
        <module>komodo-parent</module>
        
        <!-- TODO MIGHT NEED THIS LATER -->
        <!--<module>komodo-assembly-descriptors</module>-->
        
        <module>komodo-modeshape</module>
        <module>komodo-spi</module>
        <module>komodo-utils-logger</module>
        <module>komodo-utils</module>
        <module>komodo-teiid-client</module>
        <module>komodo-modeshape-sequencer-teiid-sql</module>
        <module>komodo-core</module>

        <!-- For Testing only -->
        <module>komodo-test-utils</module>
        <module>komodo-modeshape-sequencer-teiid-sql-tests</module>
        <module>komodo-core-tests</module>

        <module>komodo-modeshape-vdb</module>
        <module>komodo-shell-api</module>
        <module>komodo-shell</module>
        <module>komodo-importer</module>
        <module>komodo-relational</module>
        <module>komodo-relational-commands</module>
        <module>server</module>

        <module>build</module>

        <!-- TODO Might need this later -->
        <!--
          The JBoss AS7 subsystem needs the web components and (local) JDBC drivers.
        -->
        <!--<module>deploy/jbossas</module>-->
        <!--<module>komodo-distribution</module>-->
        
	</modules>

	<properties>
		<rootDir>${project.basedir}</rootDir>
		<modeshape.version>3.8.4.GA</modeshape.version>
		<jcr.version>2.0</jcr.version>
		<infinispan.version>5.2.10.Final</infinispan.version>
		<log4j.version>1.2.16</log4j.version>
		<slf4j.log4j.version>1.7.2</slf4j.log4j.version>
		<xnio.version>3.2.0.Final</xnio.version>
	</properties>

	<profiles>		
		<!-- 
		  This profile is used to run longer-running performance tests,
		  and must be activated manually, as in "mvn ... -Pperformance ..."
		-->
        <profile>
            <id>performance</id>
            <modules>
                <!--
                    The JBoss AS7 subsystem needs the web components and (local) JDBC drivers.
                -->
                <module>komodo-performance-tests</module>
            </modules>
        </profile>
		
        <!-- TODO Might need later -->
		<!-- 
		  This profile is used to build everything for a release, including all assemblies,
			and must be activated manually, as in "mvn ... -Passembly ..."
		-->
        <!--
        <profile>
            <id>assembly</id>
            <modules>
                <module>komodo-jca-rar</module>
                <module>komodo-client</module>
                <module>integration</module>
            </modules>
        </profile>
        -->
	</profiles>

	<dependencyManagement>
		<dependencies>
			<dependency>
				<groupId>org.modeshape</groupId>
				<artifactId>modeshape-common</artifactId>
				<version>${modeshape.version}</version>
			</dependency>
			<dependency>
				<groupId>org.modeshape</groupId>
				<artifactId>modeshape-jcr</artifactId>
				<version>${modeshape.version}</version>
			</dependency>
			<dependency>
				<groupId>org.modeshape</groupId>
				<artifactId>modeshape-sequencer-ddl</artifactId>
				<version>${modeshape.version}</version>
			</dependency>
			<dependency>
				<groupId>org.modeshape</groupId>
				<artifactId>modeshape-sequencer-teiid</artifactId>
				<version>${modeshape.version}</version>
			</dependency>
			<dependency>
				<groupId>org.modeshape</groupId>
				<artifactId>modeshape-schematic</artifactId>
				<version>${modeshape.version}</version>
			</dependency>
			<dependency>
				<groupId>org.modeshape</groupId>
				<artifactId>modeshape-jcr-api</artifactId>
				<version>${modeshape.version}</version>
			</dependency>
			<dependency>
				<groupId>org.modeshape</groupId>
				<artifactId>modeshape-extractor-tika</artifactId>
				<version>${modeshape.version}</version>
			</dependency>

			<dependency>
				<groupId>javax.jcr</groupId>
				<artifactId>jcr</artifactId>
				<version>${jcr.version}</version>
			</dependency>

			<dependency>
				<groupId>org.infinispan</groupId>
				<artifactId>infinispan-cachestore-leveldb</artifactId>
				<version>${infinispan.version}</version>
			</dependency>

			<dependency>
				<groupId>org.jboss.xnio</groupId>
				<artifactId>xnio-api</artifactId>
				<version>${xnio.version}</version>
			</dependency>

			<dependency>
				<groupId>org.jboss.xnio</groupId>
				<artifactId>xnio-nio</artifactId>
				<version>${xnio.version}</version>
			</dependency>
		</dependencies>
	</dependencyManagement>

	<dependencies>
		<dependency>
		<groupId>org.modeshape</groupId>
		<artifactId>modeshape-common</artifactId>
		</dependency>
		<dependency>
		<groupId>org.modeshape</groupId>
		<artifactId>modeshape-jcr</artifactId>
		</dependency>
		<dependency>
		<groupId>org.modeshape</groupId>
		<artifactId>modeshape-sequencer-ddl</artifactId>
		</dependency>
		<dependency>
		<groupId>org.modeshape</groupId>
		<artifactId>modeshape-sequencer-teiid</artifactId>
		</dependency>
		<dependency>
		<groupId>org.modeshape</groupId>
		<artifactId>modeshape-schematic</artifactId>
		</dependency>
		<dependency>
		<groupId>org.modeshape</groupId>
		<artifactId>modeshape-jcr-api</artifactId>
		</dependency>
		<dependency>
		<groupId>org.modeshape</groupId>
		<artifactId>modeshape-extractor-tika</artifactId>
		</dependency>
		<dependency>
			<groupId>javax.jcr</groupId>
			<artifactId>jcr</artifactId>
		</dependency>
		<dependency>
			<groupId>org.infinispan</groupId>
			<artifactId>infinispan-cachestore-leveldb</artifactId>
		</dependency>
		<dependency>
			<groupId>log4j</groupId>
			<artifactId>log4j</artifactId>
		</dependency>
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-log4j12</artifactId>
		</dependency>
	</dependencies>

	<repositories>	
		<!-- In Project repository -->
		<repository>
			<id>modeshape-in-project</id>
			<name>Modeshape Project Repo</name>
			<url>file://${project.basedir}/modeshape-libs</url>
			<releases>
				<enabled>true</enabled>
			</releases>
			<snapshots>
				<enabled>false</enabled>
			</snapshots>
		</repository>

		<repository>
			<id>redhat-product-repository</id>
			<name>Red Hat Product Repository</name>
			<url>http://maven.repository.redhat.com/ga</url>
			<layout>default</layout>
			<releases>
				<enabled>true</enabled>
			</releases>
			<snapshots>
				<enabled>false</enabled>
			</snapshots>
		</repository>
	</repositories>
</project>
